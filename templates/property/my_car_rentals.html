{% extends "property/base.html" %}
{% load static %}

{% block content %}
{% include "property/sidebar.html" %}

<div class="main-panel">
  <div class="main-header">
    <div class="main-header-logo">
      <div class="logo-header" data-background-color="dark">
        <a href="index.html" class="logo">
          <img src="{% static 'customer/img/logo.png' %}" alt="navbar brand" class="navbar-brand" height="20"/>
        </a>
        <div class="nav-toggle">
          <button class="btn btn-toggle toggle-sidebar"><i class="gg-menu-right"></i></button>
          <button class="btn btn-toggle sidenav-toggler"><i class="gg-menu-left"></i></button>
        </div>
        <button class="topbar-toggler more"><i class="gg-more-vertical-alt"></i></button>
      </div>
    </div>
    {% include "property/nav.html" %}
  </div>

  <div class="container">
    <div class="page-inner">
      <div class="d-flex align-items-left align-items-md-center flex-column flex-md-row pt-2 pb-4">
        <div></div>
      </div>

      <h2 class="mb-4">My Car Rentals</h2>

      <div class="table-responsive">
        <table class="table table-hover align-middle table-transparent">
          <thead class="text-uppercase text-secondary small">
            <tr>
              <th>Car Name</th>
              <th>Car Type</th>
              <th>Registration No.</th>
              <th>Manufacturer</th>
              <th>Seats</th>
              <th>Created At</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody>
            {% for car in car_rentals %}
            <tr class="align-middle">
              <td class="fw-bold">{{ car.car_name }}</td>
              <td>{{ car.get_car_type_display }}</td>
              <td>{{ car.registration_number }}</td>
              <td>{{ car.manufacturer }}</td>
              <td>{{ car.seats }}</td>
              <td>{{ car.created_at|date:"Y-m-d H:i" }}</td>
              <td class="d-flex gap-1">
                <a href="{% url 'car_rental_detail' car.id %}" class="btn btn-sm btn-primary">
                  <i class="bi bi-eye"></i>
                </a>

                <!-- Delete car form -->
                <form action="" method="POST" onsubmit="return confirm('Are you sure you want to delete this car rental?');">
                  {% csrf_token %}
                  <button type="submit" class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
                </form>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7" class="text-center text-muted">No car rentals found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<style>
/* Keep all your existing table styles exactly the same */
.table-transparent {
  background: transparent !important;
  border-collapse: collapse;
  width: 100%;
  min-width: 700px;
}

.table-transparent th,
.table-transparent td {
  background: transparent !important;
  color: #000;
  border: 1px solid rgba(0,0,0,0.1);
  padding: 0.5rem 0.75rem;
  text-align: left;
  white-space: nowrap;
}

.table-transparent thead th {
  border-bottom: 2px solid rgba(0,0,0,0.15);
}

.table-hover tbody tr:hover {
  background-color: rgba(0, 102, 255, 0.05);
  transition: 0.2s;
}

.btn-primary, .btn-danger {
  font-size: 0.85rem;
  padding: 0.35rem 0.75rem;
}

.table-responsive {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

@media (max-width: 768px) {
  td.d-flex.gap-1 {
    display: flex !important;
    flex-direction: row !important;
    flex-wrap: nowrap !important;
    justify-content: flex-start !important;
    align-items: center !important;
    gap: 0.35rem !important;
    white-space: nowrap !important;
  }
  .table-transparent td {
    white-space: nowrap !important;
  }
}
</style>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">

{% endblock %}
