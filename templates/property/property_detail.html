{% extends "property/base.html" %}
{% load static %}

{% block content %}
{% include "property/sidebar.html" %}

<div class="main-panel">
  <!-- HEADER (DO NOT TOUCH STRUCTURE) -->
  <div class="main-header">
    <div class="main-header-logo">
      <div class="logo-header" data-background-color="dark">
        <a href="#" class="logo">
          <img src="{% static 'customer/img/logo.png' %}" alt="navbar brand" class="navbar-brand" height="20">
        </a>
        <div class="nav-toggle">
          <button class="btn btn-toggle toggle-sidebar"><i class="gg-menu-right"></i></button>
          <button class="btn btn-toggle sidenav-toggler"><i class="gg-menu-left"></i></button>
        </div>
        <button class="topbar-toggler more"><i class="gg-more-vertical-alt"></i></button>
      </div>
    </div>

    {% include "property/nav.html" %}
  </div>

  <!-- CONTENT -->
  <div class="container">
    <div class="page-inner">

      <!-- TITLE -->
      <h2 class="mb-2">{{ property.property_name }}</h2>
      <p class="text-muted">
        {{ property.property_type|title }} |
        {{ property.address }}, {{ property.district }},
        {{ property.region }}, {{ property.country }}
      </p>

      <!-- GRID -->
      <div class="row">

        <!-- LEFT: IMAGES + DESCRIPTION -->
        <div class="col-lg-7 mb-4">

          {% if photos %}
          <!-- MAIN IMAGE -->
          <div class="main-photo mb-3">
            <img
              src="{{ photos.0.image.url }}"
              id="mainImage"
              alt="Property image">
          </div>

          <!-- THUMBNAILS -->
          <div class="thumbs-row">
            {% for photo in photos %}
              <img
                src="{{ photo.image.url }}"
                alt="Thumbnail"
                onclick="document.getElementById('mainImage').src='{{ photo.image.url }}'">
            {% endfor %}
          </div>
          {% endif %}

          {% if property.property_description %}
          <div class="mt-4">
            <h5>Property Description</h5>
            <p>{{ property.property_description }}</p>
          </div>
          {% endif %}
        </div>

        <!-- RIGHT: INFO CARDS -->
        <div class="col-lg-5">

          <div class="card mb-3 shadow-sm border-0">
            <div class="card-body p-3">
              <h5 class="card-title">Property Info</h5>
              <p><strong>Phone:</strong> {{ property.phone_number|default:"N/A" }}</p>
              <p><strong>Size:</strong> {{ property.property_size_sqm|default:"N/A" }} sqm</p>
              <p><strong>Languages:</strong> {{ property.languages_spoken|join:", "|default:"-" }}</p>
            </div>
          </div>

          {% if setup %}
          <div class="card mb-3 shadow-sm border-0">
            <div class="card-body p-3">
              <h5 class="card-title">Setup & Rooms</h5>
              <p>Rooms: {{ setup.number_of_rooms }}</p>
              <p>Beds per room: {{ setup.beds_per_room }}</p>
              <p>Total beds: {{ setup.total_beds }}</p>
              <p>Bathrooms: {{ setup.number_of_bathrooms }}</p>
              <p>Amenities: {{ setup.amenities|join:", "|default:"-" }}</p>
              <p>Room types: {{ setup.room_types|join:", "|default:"-" }}</p>
            </div>
          </div>
          {% endif %}

          {% if pricing %}
          <div class="card mb-3 shadow-sm border-0">
            <div class="card-body p-3">
              <h5 class="card-title">Pricing</h5>
              <p>Price / night: {{ pricing.base_price_per_night }}</p>
              <p>Available: {{ pricing.available_from }} â†’ {{ pricing.available_to }}</p>
              <p>Min stay: {{ pricing.minimum_stay_nights }} nights</p>
            </div>
          </div>
          {% endif %}


          <!-- Legal Card -->
          {% if legal %}
          <div class="card mb-3 shadow-sm border-0">
            <div class="card-body p-3">
              <h5 class="card-title">Legal & Policies</h5>
              <p><strong>Terms:</strong> {{ legal.terms_and_conditions|default:"-" }}</p>
              <p><strong>House Rules:</strong> {{ legal.house_rules|default:"-" }}</p>
              <p><strong>Cancellation:</strong> {{ legal.cancellation_policy|default:"-" }}</p>
              <p><strong>Check in Policy:</strong> {{ legal.check_in_policy|default:"-" }}</p>
              <p><strong>Smoking Policy:</strong> {{ legal.smoking_policy|default:"-" }}</p>
              <p><strong>Pet Policy:</strong> {{ legal.pet_policy|default:"-" }}</p>
              
            </div>
          </div>
          {% endif %}

        </div>
      </div>
    </div>
  </div>
</div>

<!-- CLEAN, BOOKING.COM-STYLE CSS -->
<style>
.main-photo {
  width: 100%;
  height: 420px;
  overflow: hidden;
  border-radius: 12px;
  background: #f3f3f3;
}

.main-photo img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.thumbs-row {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
}

.thumbs-row img {
  width: 90px;
  height: 65px;
  object-fit: cover;
  border-radius: 6px;
  border: 1px solid #ddd;
}

/* No cursor pointer (as requested) */
.thumbs-row img {
  cursor: default;
}

.card {
  border-radius: 12px;
}

@media (max-width: 992px) {
  .main-photo {
    height: 300px;
  }
}
</style>

{% endblock %}
