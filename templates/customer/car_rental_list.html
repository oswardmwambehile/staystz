{% extends 'customer/base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<div class="container-fluid bg-white p-0">

    {% include 'customer/nav.html' %}

    <!-- Header Start -->
    <div class="container-fluid header bg-white p-0">
        <div class="row g-0 align-items-center flex-column-reverse flex-md-row">
            <div class="col-md-6 p-5 mt-lg-5">
                <h1 class="display-5 animated fadeIn mb-4">Car Rentals in <span class="text-primary">{{ car_type_selected }}</span></h1> 
                <nav aria-label="breadcrumb animated fadeIn">
                    <ol class="breadcrumb text-uppercase">
                        <li class="breadcrumb-item"><a href="#">Home</a></li>
                        <li class="breadcrumb-item text-body active" aria-current="page">Car Rentals</li>
                    </ol>
                </nav>
            </div>
            <div class="col-md-6 animated fadeIn">
                <img class="img-fluid" src="{% static 'customer/img/car-rental.webp' %}" alt="">
            </div>
        </div>
    </div>
    <!-- Header End -->

    <!-- Search Start -->
    {% include 'customer/search.html' %}
    <!-- Search End -->

    <!-- Car Rental List Start -->
    <div class="container-fluid py-5">
        <div class="container">
            <div class="row g-4">
                {% for car in cars %}
                <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.{{ forloop.counter0|add:"1" }}s">
                    <div class="property-item rounded overflow-hidden">

                        <div class="position-relative overflow-hidden">
                            <a href="{% url 'car_rental_detail' car.pk %}">
                                {% if car.photos.first %}
                                    <img class="img-fluid" src="{{ car.photos.first.image.url }}" alt="{{ car.car_name }}">
                                {% else %}
                                    <img class="img-fluid" src="{% static 'customer/img/property-placeholder.jpg' %}" alt="{{ car.car_name }}">
                                {% endif %}
                            </a>
                            <div class="bg-primary rounded text-white position-absolute start-0 top-0 m-4 py-1 px-3">
                                {{ car.get_car_type_display }}
                            </div>
                        </div>

                        <div class="p-4 pb-0">
                            <h5 class="text-primary mb-3">
                                 {{ car.car_name}}
                            </h5>
                            <h5 class="text-primary mb-3">
                                TZS {{ car.carrentalpricing.base_price_per_day|default:"N/A"|floatformat:0|intcomma }}/Day
                            </h5>
                            
                            
                            <p><i class="fa fa-car text-primary me-2"></i> Manufacturer :
                                {{ car.manufacturer }} | {{ car.model_year }}
                            </p>
                        </div>

                        <div class="d-flex border-top">
                            <small class="flex-fill text-center border-end py-2">
                                <i class="fa fa-users text-primary me-2"></i>
                                {{ car.seats }} Seats
                            </small>
                            <small class="flex-fill text-center py-2">
                                <i class="fa fa-paint-brush text-primary me-2"></i>Color 
                                {{ car.color|default:"N/A" }}
                            </small>
                        </div>

                        <div class="p-4 pt-2">
                            <a href="{% url 'car_rental_details' car.id %}" class="btn btn-primary w-100">
                                See Availability
                            </a>
                        </div>

                    </div>
                </div>
                {% empty %}
                <p class="text-center text-danger">No car rentals found. Please check back later.</p>
                {% endfor %}
            </div>
        </div>
    </div>
    <!-- Car Rental List End -->

    {% include 'customer/footer.html' %}

    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
</div>

<style>
.property-item img {
    height: 260px;
    width: 100%;
    object-fit: cover;
}
.property-item {
    height: 100%;
    display: flex;
    flex-direction: column;
}
.property-item .p-4 {
    flex-grow: 1;
}
</style>

{% endblock %}
