{% extends 'customer/base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<div class="container-fluid bg-white p-0">

    <!-- Navbar -->
    {% include 'customer/nav.html' %}

       
      
       <!-- Header Start -->
<div class="container-fluid header bg-white p-0">
    <div class="row g-0 align-items-center flex-column-reverse flex-md-row">
        
        <!-- Text Section -->
        <div class="col-md-6 p-5 mt-lg-5">
            <h1 class="animated fadeIn mb-3" style="font-family: 'Montserrat', sans-serif; font-weight: 500; font-size: 1.8rem; line-height: 1.2;">
    Property List in <span style="color: #174376;">{{ property_type }}</span>
</h1>

            <p class="text-muted animated fadeIn mb-4" style="font-size: 16px;">
    Explore a curated list of properties available in {{ property_type }}. Browse through a variety of homes, apartments, and land options to find the one that fits your lifestyle and budget. Use our filters to refine your search by type, location, price, and other amenities, making it easier to discover your perfect property or investment opportunity.
</p>

            <nav aria-label="breadcrumb" class="animated fadeIn">
                <ol class="breadcrumb text-uppercase mb-0">
                    <li class="breadcrumb-item"><a href="#" class="text-decoration-none">Home</a></li>
                    <li class="breadcrumb-item"><a href="#" class="text-decoration-none">Pages</a></li>
                    <li class="breadcrumb-item text-body active" aria-current="page">Property List</li>
                </ol>
            </nav>
        </div> 

        <!-- Image Section --> 
        <div class="col-md-6 animated fadeIn text-center wow zoomIn" data-wow-delay="0.2s">
            <img class="img-fluid rounded" src="{% static 'customer/img/s6.jpg' %}" alt="Property Image">
        </div>

    </div>
</div>
<!-- Header End -->
<!-- Header End -->

    <!-- Search Start -->
    {% include 'customer/search.html' %}
    <!-- Search End -->

    <!-- Property List Start -->
    <div class="container-fluid py-5">
        <div class="container">
            <div class="tab-content">
                <div id="tab-1" class="tab-pane fade show p-0 active">
                    <div class="row g-4">

                        {% for property in properties %}
                        <div class="col-lg-4 col-md-6 wow fadeInUp" data-wow-delay="0.{{ forloop.counter0|add:"1" }}s">
                            <div class="property-item rounded overflow-hidden">

                                <div class="position-relative overflow-hidden">
                                    <a href="{% url 'residence_property_detail' property.pk %}">
                                        {% if property.photos.first %}
                                            <img class="img-fluid" src="{{ property.photos.first.image.url }}" alt="{{ property.property_name }}">
                                        {% else %}
                                            <img class="img-fluid" src="{% static 'customer/img/property-placeholder.jpg' %}" alt="{{ property.property_name }}">
                                        {% endif %}
                                    </a>

                                    <div class="bg-primary rounded text-white position-absolute start-0 top-0 m-4 py-1 px-3">
                                        {{ property.status|title }}
                                    </div>

                                    <div class="bg-white rounded-top text-primary position-absolute start-0 bottom-0 mx-4 pt-1 px-3">
                                        {{ property.property_type|title }}
                                    </div>
                                </div>

                                <div class="p-4 pb-0">
                                    <h5 class="text-primary mb-3">
                                        TZS {% if property.residencepropertypricing %}{{ property.residencepropertypricing.base_price|floatformat:0|intcomma }}{% else %}N/A{% endif %}/Month
                                    </h5>
                                    <a class="d-block h5 mb-2" href="{% url 'residence_property_detail' property.pk %}">
                                        {{ property.property_name }}
                                    </a>
                                    <p><i class="fa fa-map-marker-alt text-primary me-2"></i>
                                        {{ property.address }}, {{ property.region }}
                                    </p>
                                </div>

                                <div class="d-flex border-top">
                                    <small class="flex-fill text-center border-end py-2">
                                        <i class="fa fa-ruler-combined text-primary me-2"></i>
                                        {{ property.property_size_sqm|default:"N/A" }} Sqm
                                    </small>
                                    <small class="flex-fill text-center border-end py-2">
                                        <i class="fa fa-bed text-primary me-2"></i>
                                        {% if property.residencepropertysetup %}{{ property.residencepropertysetup.total_beds|default:"N/A" }}{% else %}N/A{% endif %} Bed
                                    </small>
                                    <small class="flex-fill text-center py-2">
                                        <i class="fa fa-bath text-primary me-2"></i>
                                        {% if property.residencepropertysetup %}{{ property.residencepropertysetup.number_of_bathrooms|default:"N/A" }}{% else %}N/A{% endif %} Bath
                                    </small>
                                </div>

                                <div class="p-4 pt-2">
                                    <a href="{% url 'residence_property_details' property.id %}" class="btn  w-100" style="background-color: #174376; color: white;">
                                        See Availability
                                    </a>
                                </div>

                            </div>
                        </div>
                        {% empty %}
<div class="col-12">
    <div class="alert alert-warning text-center py-3" role="alert">
        <h5 class="mb-2">No properties found</h5>
        <p class="mb-0">Sorry, there are no properties available in this property type at the moment. Thank you for browsing our listings.</p>
    </div>
</div>
{% endfor %}

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Property List End -->

    <!-- Footer Start -->
    {% include 'customer/footer.html' %}
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>

</div>

<style>
.property-item img {
    height: 260px;        /* fixed height */
    width: 100%;
    object-fit: cover;    /* crop images without stretching */
}
.property-item {
    height: 100%;
    display: flex;
    flex-direction: column;
}

.property-item .p-4 {
    flex-grow: 1; /* push footer down so cards align */
}
</style>
<!-- Google Fonts: Montserrat with 300, 400, 700 -->
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap" rel="stylesheet">

{% endblock %}
